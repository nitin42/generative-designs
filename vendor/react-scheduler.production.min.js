/** @license React v16.4.1
 * react-scheduler.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict'
;(function(d, f) {
  'object' === typeof exports && 'undefined' !== typeof module
    ? f(exports)
    : 'function' === typeof define && define.amd
      ? define(['exports'], f)
      : f((d.ReactScheduler = {}))
})(this, function(d) {
  var f = !(
      'undefined' === typeof window ||
      !window.document ||
      !window.document.createElement
    ),
    C = Date,
    v = 'function' === typeof setTimeout ? setTimeout : void 0,
    w = 'function' === typeof clearTimeout ? clearTimeout : void 0,
    D =
      'function' === typeof requestAnimationFrame
        ? requestAnimationFrame
        : void 0,
    E =
      'function' === typeof cancelAnimationFrame
        ? cancelAnimationFrame
        : void 0,
    F = 'object' === typeof performance && 'function' === typeof performance.now
  d.now = void 0
  if (F) {
    var G = performance
    d.now = function() {
      return G.now()
    }
  } else
    d.now = function() {
      return C.now()
    }
  d.scheduleWork = void 0
  d.cancelScheduledWork = void 0
  if (f) {
    var e = null,
      m = null,
      h = -1,
      n = !1,
      k = !1,
      x = void 0,
      y = void 0,
      z = function(a) {
        x = D(function(b) {
          w(y)
          a(b)
        })
        y = v(function() {
          E(x)
          a(d.now())
        }, 100)
      },
      p = 0,
      q = 33,
      l = 33,
      r = {
        didTimeout: !1,
        timeRemaining: function() {
          var a = p - d.now()
          return 0 < a ? a : 0
        }
      },
      A = function(a, b) {
        var c = a.scheduledCallback,
          e = !1
        try {
          c(b), (e = !0)
        } finally {
          d.cancelScheduledWork(a), e || ((n = !0), window.postMessage(t, '*'))
        }
      },
      t =
        '__reactIdleCallback$' +
        Math.random()
          .toString(36)
          .slice(2)
    window.addEventListener(
      'message',
      function(a) {
        if (a.source === window && a.data === t && ((n = !1), null !== e)) {
          if (null !== e) {
            var b = d.now()
            if (!(-1 === h || h > b)) {
              a = -1
              for (var c = [], g = e; null !== g; ) {
                var f = g.timeoutTime
                ;-1 !== f && f <= b
                  ? c.push(g)
                  : -1 !== f && (-1 === a || f < a) && (a = f)
                g = g.next
              }
              if (0 < c.length)
                for (r.didTimeout = !0, b = 0, g = c.length; b < g; b++)
                  A(c[b], r)
              h = a
            }
          }
          for (a = d.now(); 0 < p - a && null !== e; )
            (a = e), (r.didTimeout = !1), A(a, r), (a = d.now())
          null === e || k || ((k = !0), z(B))
        }
      },
      !1
    )
    var B = function(a) {
      k = !1
      var b = a - p + l
      b < l && q < l ? (8 > b && (b = 8), (l = b < q ? q : b)) : (q = b)
      p = a + l
      n || ((n = !0), window.postMessage(t, '*'))
    }
    d.scheduleWork = function(a, b) {
      var c = -1
      null != b && 'number' === typeof b.timeout && (c = d.now() + b.timeout)
      if (-1 === h || (-1 !== c && c < h)) h = c
      a = { scheduledCallback: a, timeoutTime: c, prev: null, next: null }
      null === e ? (e = a) : ((b = a.prev = m), null !== b && (b.next = a))
      m = a
      k || ((k = !0), z(B))
      return a
    }
    d.cancelScheduledWork = function(a) {
      if (null !== a.prev || e === a) {
        var b = a.next,
          c = a.prev
        a.next = null
        a.prev = null
        null !== b
          ? null !== c
            ? ((c.next = b), (b.prev = c))
            : ((b.prev = null), (e = b))
          : null !== c
            ? ((c.next = null), (m = c))
            : (m = e = null)
      }
    }
  } else {
    var u = new Map()
    d.scheduleWork = function(a, b) {
      b = { scheduledCallback: a, timeoutTime: 0, next: null, prev: null }
      var c = v(function() {
        a({
          timeRemaining: function() {
            return Infinity
          },
          didTimeout: !1
        })
      })
      u.set(a, c)
      return b
    }
    d.cancelScheduledWork = function(a) {
      var b = u.get(a.scheduledCallback)
      u.delete(a)
      w(b)
    }
  }
  Object.defineProperty(d, '__esModule', { value: !0 })
})
